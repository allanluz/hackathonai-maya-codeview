# MAYA Code Review System - Configuração Principal
# Sistema de análise automatizada de código com padrões Sinqia

# ===================================================================
# CONFIGURAÇÃO DO SERVIDOR
# ===================================================================
server.port=8081
server.servlet.context-path=/
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# ===================================================================
# INFORMAÇÕES DA APLICAÇÃO
# ===================================================================
spring.application.name=MAYA Code Review System
spring.application.version=1.0.0
spring.main.allow-bean-definition-overriding=true
info.app.name=${spring.application.name}
info.app.version=${spring.application.version}
info.app.description=Sistema de análise automatizada de código com padrões Sinqia

# ===================================================================
# CONFIGURAÇÃO DO BANCO DE DADOS (H2 - Desenvolvimento)
# ===================================================================
spring.datasource.url=jdbc:h2:mem:maya_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=password
spring.datasource.driver-class-name=org.h2.Driver

# H2 Console (apenas desenvolvimento)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# ===================================================================
# CONFIGURAÇÃO JPA/HIBERNATE
# ===================================================================
spring.jpa.database=h2
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.defer-datasource-initialization=true

# Disable data.sql initialization temporarily
spring.sql.init.mode=never

# Configurações adicionais do Hibernate
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.generate_statistics=false

# ===================================================================
# POOL DE CONEXÕES (HikariCP)
# ===================================================================
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.validation-timeout=5000

# ===================================================================
# CONFIGURAÇÃO JACKSON/JSON
# ===================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Sao_Paulo
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.serialization.indent-output=true

# ===================================================================
# CONFIGURAÇÃO MULTIPART/UPLOAD
# ===================================================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true

# ===================================================================
# CONFIGURAÇÃO ACTUATOR/MONITORAMENTO
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true
management.health.db.enabled=true

# ===================================================================
# CONFIGURAÇÃO DE LOGGING
# ===================================================================
logging.level.com.sinqia.maya=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Padrão de log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Arquivo de log
logging.file.name=logs/maya.log
logging.file.max-size=10MB
logging.file.max-history=30

# ===================================================================
# CONFIGURAÇÃO CORS
# ===================================================================
maya.cors.allowed-origins=http://localhost:4200,http://localhost:3000,https://maya.sinqia.com.br
maya.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
maya.cors.allowed-headers=*
maya.cors.max-age=3600

# ===================================================================
# CONFIGURAÇÃO TFS/AZURE DEVOPS
# ===================================================================
# Configurações baseadas no script tfs-final.js funcional
tfs.server.url=https://tfs.sinqia.com.br
tfs.collection.name=GestaoRecursos
tfs.project.name=DriveAMnet
tfs.repository.name=DriveAMnet
tfs.username=allan.luz
tfs.pat.token=catwjhm2wos7d2q3qdddrh5as5kjd3ssvfmni4c5teibsoaflbba

# Configuração legacy (manter para compatibilidade)
tfs.collection=${TFS_COLLECTION:GestaoRecursos}
tfs.password=${TFS_PASSWORD:}
tfs.timeout.connection=${TFS_TIMEOUT_CONNECTION:30000}
tfs.timeout.read=${TFS_TIMEOUT_READ:60000}

# Configuração MAYA TFS (Azure DevOps)
maya.tfs.base-url=${TFS_BASE_URL:https://tfs.sinqia.com.br}
maya.tfs.organization=${TFS_ORGANIZATION:sinqia}
maya.tfs.personal-access-token=${TFS_PERSONAL_ACCESS_TOKEN:catwjhm2wos7d2q3qdddrh5as5kjd3ssvfmni4c5teibsoaflbba}
maya.tfs.api-version=7.0

# ===================================================================
# CONFIGURAÇÃO SINQIA AI
# ===================================================================
maya.ai.base-url=${SINQIA_AI_URL:http://everai.sinqia.com.br}
maya.ai.endpoint=${SINQIA_AI_ENDPOINT:http://everai.sinqia.com.br/api/v1/analysis}
maya.ai.timeout=${SINQIA_AI_TIMEOUT:30000}
maya.ai.enabled=${SINQIA_AI_ENABLED:true}
maya.ai.api-key=${SINQIA_AI_API_KEY:demo-key-2024}

# ===================================================================
# CONFIGURAÇÃO EVERAI LLM
# ===================================================================
everai.base-url=${EVERAI_BASE_URL:http://everai.sinqia.com.br}
everai.api-key=${EVERAI_API_KEY:your-api-key-here}
everai.default-model=${EVERAI_DEFAULT_MODEL:gemini-2.0-flash-001}
everai.default-family=${EVERAI_DEFAULT_FAMILY:gemini}
everai.default-temperature=${EVERAI_DEFAULT_TEMPERATURE:0.7}
everai.max-output-tokens=${EVERAI_MAX_OUTPUT_TOKENS:5000}
everai.enabled=${EVERAI_ENABLED:false}

# ===================================================================
# CONFIGURAÇÃO MAYA ANALYSIS
# ===================================================================
# Detecção de vazamento de conexão
maya.analysis.connection-leak.enabled=true
maya.analysis.connection-leak.severity.missing-devolve=CRITICAL
maya.analysis.connection-leak.severity.not-in-finally=ERROR
maya.analysis.connection-leak.severity.return-before-devolve=ERROR

# Análise de complexidade
maya.analysis.complexity.enabled=true
maya.analysis.complexity.threshold.low=5
maya.analysis.complexity.threshold.medium=10
maya.analysis.complexity.threshold.high=15
maya.analysis.complexity.threshold.critical=20

# Padrões arquiteturais
maya.analysis.architecture.enabled=true
maya.analysis.architecture.enforce-sinqia-packages=true
maya.analysis.architecture.require-service-suffix=true

# Análise de segurança
maya.analysis.security.enabled=true
maya.analysis.security.sql-injection.enabled=true
maya.analysis.security.sensitive-logging.enabled=true

# ===================================================================
# CONFIGURAÇÃO DE CACHE
# ===================================================================
spring.cache.type=simple
spring.cache.cache-names=models,configurations,file-analyses,auxiliary-files

# ===================================================================
# CONFIGURAÇÃO ASYNC
# ===================================================================
maya.async.core-pool-size=10
maya.async.max-pool-size=20
maya.async.queue-capacity=500

# ===================================================================
# CONFIGURAÇÃO DE SEGURANÇA
# ===================================================================
maya.security.jwt.secret=${JWT_SECRET:maya-jwt-secret-key-2024}
maya.security.jwt.expiration=86400000
maya.security.cors.enabled=true

# ===================================================================
# CONFIGURAÇÃO SPRINGDOC/SWAGGER
# ===================================================================
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.doc-expansion=none

# ===================================================================
# CONFIGURAÇÃO DE WEBHOOK
# ===================================================================
maya.webhook.enabled=${WEBHOOK_ENABLED:false}
maya.webhook.secret=${WEBHOOK_SECRET:}

# ===================================================================
# CONFIGURAÇÃO LLM (Large Language Models)
# ===================================================================
# Configuração geral de LLM
maya.llm.enabled=${LLM_ENABLED:true}
maya.llm.timeout=${LLM_TIMEOUT:30000}
maya.llm.default-model=${LLM_DEFAULT_MODEL:gemini-2.0-flash-001}

# Configuração Google Gemini
maya.llm.gemini.api-key=${GEMINI_API_KEY:}
maya.llm.gemini.base-url=https://generativelanguage.googleapis.com/v1beta
maya.llm.gemini.model.flash=gemini-2.0-flash-001
maya.llm.gemini.model.pro=gemini-pro
maya.llm.gemini.max-tokens=32768

# Configuração OpenAI GPT
maya.llm.openai.api-key=${OPENAI_API_KEY:}
maya.llm.openai.base-url=https://api.openai.com/v1
maya.llm.openai.model.gpt4=gpt-4-turbo
maya.llm.openai.model.gpt35=gpt-3.5-turbo
maya.llm.openai.max-tokens=4096

# Parâmetros de análise LLM
maya.llm.analysis.temperature=0.3
maya.llm.analysis.max-output-tokens=5000
maya.llm.analysis.include-sinqia-patterns=true

# Cache de respostas LLM
maya.llm.cache.enabled=true
maya.llm.cache.ttl=3600

# ===================================================================
# CONFIGURAÇÃO DE PERFORMANCE
# ===================================================================
maya.performance.parallel-processing=true
maya.performance.max-threads=10
maya.performance.batch-size=50
maya.performance.timeout.analysis=300000
